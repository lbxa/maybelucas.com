---
import { getCollection } from "astro:content";
import RootLayout from "@layouts/RootLayout.astro";
import dayjs from "dayjs";
import relativeTime from "dayjs/plugin/relativeTime";
import I from "@components/I.astro";
dayjs.extend(relativeTime);

const posts = await getCollection("blog")
---
<RootLayout title="Posts">
  <main>
    <h1>Posts</h1>
    {posts.map((p) => (
      <div>
        <a class="hover:underline" href={"/posts/" + p.slug}>{p.data.title}</a>
        <I>{dayjs(p.data.date).toNow(true)} ago</I>
      </div>
    ))} 
  </main>
</RootLayout>